!function(t){function o(){this.result=[]}t.ot=t.ot||{},o.prototype.push=function(t){t="string"==typeof t?t:new Uint8Array(t),this.result.push(t)},o.prototype.finalize=function(){var o=new Blob(this.result);return t.URL.createObjectURL(o)};var e,a=$("#droppable-zone"),n=$("#file-type"),l=$("#input"),r=$("#output"),i=$("#download-image");a.on("droppableFile:change",function(t,o){h=e=o[0],r.val(""),i.hide(),ot.autoUpdate()});var u=function(){if("text"===n.val())return void ot.autoUpdate();if("url"===n.val()){r.val("download...");var t=l.val();ot.getBlob(t,function(o){o?(h=o,ot.autoUpdate()):(h=null,r.val(t?"download failed":""))},function(t){var o=(t.total?(t.loaded/t.total*100).toFixed(2):100)+"%";r.val("download..."+o)})}},d=function(){l.off("change",u),l.off("input propertychange",d)};l.on("input propertychange",d),l.on("input propertychange change",u);var c=$("#download-file-name");c.change(function(){i.attr("download",c.val())}),c.change();var f=function(){p&&(p.abort(),p=null)};n.change(function(){"file"===n.val()?(ot.cancelGetBlob(),l.hide(),a.show(),h=e):(f(),l.show(),a.hide(),h=null,u())});var h,p,v=ot.execute;ot.setExecute(function(){if(r.val(""),i.hide(),!s)return r.val("loading...");if(f(),"text"===n.val())return v();if(h){if(!t.FileReader)return r.text("Your browser does not support.");gtag("event","submit");var o=t.PROCESSING_MESSAGE||"hashing...";if(p=new FileReader,method.update){var e=t.FILE_BATCH_SIZE||2097152,a=0,l=h.size,u=method;p.onload=function(t){try{u=u.update(t.target.result),d()}catch(t){r.val(t)}};var d=function(){if(a<l){r.val(o+(a/l*100).toFixed(2)+"%");var t=Math.min(a+e,l);p.readAsArrayBuffer(h.slice(a,t)),a=t}else ot.handleOutput(u.hex())};d()}else r.val(o),p.onload=function(t){try{ot.handleOutput(method(t.target.result))}catch(t){r.val(t)}},p.readAsArrayBuffer(h)}}),ot.DownloadBuilder=o,ot.DOWNLOAD_MESSAGE="Please click the download icon to download.",ot.getFile=function(){return h},ot.setFilename=function(t){i.attr("download",t)},ot.setDownload=function(t){i.attr("href",t),i.show()};var s=!1;$(t).on("methodLoad",function(){s=!0,r.val(""),n.change()}),!!(t.Blob&&t.URL&&t.URL.createObjectURL)||(++waitLoadCount,ot.createOnDemandScript("js/data-uri-download-builder.js").load(function(){methodLoad()}))}(window);